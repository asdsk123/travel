<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 Tokyo</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Zen Maru Gothic"', '"Noto Sans TC"', 'sans-serif'],
                    },
                    colors: {
                        muji: {
                            bg: '#f7f6f2',      
                            card: '#ffffff',
                            text: '#3a3530',    
                            sub: '#6b6661',     
                            accent: '#a84a3e',  
                            nav: '#e8e6e1',
                            select: '#d6d3cd'
                        }
                    },
                    boxShadow: {
                        'card': '0 6px 16px -4px rgba(0, 0, 0, 0.1)',
                    }
                }
            }
        }
    </script>

    <style>
        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* é é¢åˆ‡æ›å‹•ç•« */
        .view-section { display: none; animation: fadeIn 0.4s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* å¤©æ°£å€åŸŸæ¨£å¼ */
        .weather-box {
            background-color: #fff;
            border-radius: 20px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            border: 1px solid #e7e5e4;
        }

        /* ç¢ºä¿åœ–ç‰‡åœ¨ notes å…§èƒ½å¤ æ­£ç¢ºé¡¯ç¤º */
        .notes-img {
            max-width: 100%;
            height: auto;
        }
        
        /* è®“ input:number ç§»é™¤ä¸Šä¸‹ç®­é ­ */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* èª¿æ•´ placeholder å­—é«”å¤§å° */
        #jpy-amount::placeholder {
            font-size: 0.8em; /* ç¸®å° placeholder å­—é«” */
        }
        
        /* é‡å°ä¸‰æ¬„ä½ˆå±€çš„èª¿æ•´ */
        .prep-list-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }
        .prep-list-grid label {
            padding: 10px;
            font-size: 1rem;
        }
    </style>
</head>
<body class="bg-muji-bg text-muji-text font-sans antialiased pb-safe-bottom select-none">

    <nav class="fixed top-0 w-full z-50 bg-white shadow-md border-b border-stone-200">
        <div class="flex h-16">
            <button onclick="switchMainTab('plan')" class="nav-main-btn flex-1 text-lg sm:text-xl lg:text-2xl font-bold text-muji-accent border-b-4 border-muji-accent bg-stone-50" data-target="plan">
                <i class="fa-regular fa-calendar-check mr-1 sm:mr-2"></i>è¡Œç¨‹
            </button>
            <button onclick="switchMainTab('booking')" class="nav-main-btn flex-1 text-lg sm:text-xl lg:text-2xl font-bold text-stone-400 border-b-4 border-transparent hover:bg-stone-50" data-target="booking">
                <i class="fa-solid fa-ticket mr-1 sm:mr-2"></i>é è¨‚
            </button>
        </div>
        <div class="flex h-12 border-t border-stone-100">
            <button onclick="switchMainTab('others')" class="nav-main-btn flex-1 text-sm sm:text-base font-bold text-stone-400 border-b-4 border-transparent hover:bg-stone-50" data-target="others">
                <i class="fa-solid fa-circle-info mr-1"></i>å…¶ä»–
            </button>
            <button onclick="switchMainTab('currency')" class="nav-main-btn flex-1 text-sm sm:text-base font-bold text-stone-400 border-b-4 border-transparent hover:bg-stone-50" data-target="currency">
                <i class="fa-solid fa-money-bill-transfer mr-1"></i>åŒ¯ç‡æ›ç®—
            </button>
            <button onclick="switchMainTab('prep')" class="nav-main-btn flex-1 text-sm sm:text-base font-bold text-stone-400 border-b-4 border-transparent hover:bg-stone-50" data-target="prep">
                <i class="fa-solid fa-suitcase-rolling mr-1"></i>è¡Œå‰æº–å‚™
            </button>
        </div>
    </nav>

    <main class="pt-32 px-4 pb-10 max-w-3xl mx-auto min-h-screen">

        <section id="view-plan" class="view-section active">
            
            <div class="sticky top-28 z-40 bg-muji-bg pt-2 pb-4 -mx-4 px-4 overflow-x-auto whitespace-nowrap no-scrollbar flex gap-3" id="day-buttons-container">
                </div>

            <div id="daily-content" class="mt-2 space-y-6">
                </div>

        </section>

        <section id="view-booking" class="view-section">
            
            <div class="bg-white rounded-3xl p-6 shadow-card mb-8 border border-stone-100">
                <h2 class="text-2xl font-bold text-muji-text mb-6 flex items-center border-b pb-4">
                    <i class="fa-solid fa-plane-departure text-muji-accent mr-3"></i>èˆªç­è³‡è¨Š
                </h2>
                
                <div class="mb-6">
                    <div class="bg-blue-50 text-blue-800 px-4 py-2 rounded-lg inline-block font-bold mb-3 text-lg">å»ç¨‹ 2/12 (å››)</div>
                    <div class="flex items-center justify-between px-2">
                        <div class="text-center">
                            <div class="text-3xl font-bold">09:30</div>
                            <div class="text-lg text-stone-500">TPE å°åŒ—</div>
                        </div>
                        <div class="flex-1 px-4 text-center">
                            <div class="text-stone-400 text-lg mb-1"><i class="fa-solid fa-plane"></i> CI 0100</div>
                            <div class="h-1 bg-stone-200 rounded-full"></div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold">13:30</div>
                            <div class="text-lg text-stone-500">NRT æˆç”°</div>
                        </div>
                    </div>
                </div>

                <div>
                    <div class="bg-orange-50 text-orange-800 px-4 py-2 rounded-lg inline-block font-bold mb-3 text-lg">å›ç¨‹ 2/18 (ä¸‰)</div>
                    <div class="flex items-center justify-between px-2">
                        <div class="text-center">
                            <div class="text-3xl font-bold">17:45</div>
                            <div class="text-lg text-stone-500">NRT æˆç”°</div>
                        </div>
                        <div class="flex-1 px-4 text-center">
                            <div class="text-stone-400 text-lg mb-1"><i class="fa-solid fa-plane"></i> CI 0105</div>
                            <div class="h-1 bg-stone-200 rounded-full"></div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold">20:55</div>
                            <div class="text-lg text-stone-500">TPE å°åŒ—</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-3xl p-6 shadow-card mb-8 border border-stone-100">
                <h2 class="text-2xl font-bold text-muji-text mb-6 flex items-center border-b pb-4">
                    <i class="fa-solid fa-hotel text-muji-accent mr-3"></i>ä½å®¿è³‡è¨Š
                </h2>
                
                <div class="mb-6 bg-stone-50 rounded-2xl p-5">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-lg font-bold text-stone-600">æ©«æ¿± (4æ™š)</span>
                        <span class="bg-stone-200 px-3 py-1 rounded text-stone-600 font-bold">2/12 - 2/16</span>
                    </div>
                    <h3 class="text-2xl font-bold text-muji-text mb-2">Westin Hotel Yokohama</h3>
                    <p class="text-lg text-stone-500">ã‚¦ã‚§ã‚¹ãƒ†ã‚£ãƒ³ãƒ›ãƒ†ãƒ«æ¨ªæµœ</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Westin+Hotel+Yokohama" target="_blank" class="mt-4 inline-flex items-center text-blue-600 font-bold text-lg bg-white px-4 py-2 rounded-xl shadow-sm border">
                        <i class="fa-solid fa-map-location-dot mr-2"></i>å°èˆª
                    </a>
                </div>

                <div class="bg-stone-50 rounded-2xl p-5">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-lg font-bold text-stone-600">æ²³å£æ¹– (2æ™š)</span>
                        <span class="bg-stone-200 px-3 py-1 rounded text-stone-600 font-bold">2/16 - 2/18</span>
                    </div>
                    <h3 class="text-2xl font-bold text-muji-text mb-2">è‹¥è‰ã®å®¿ ä¸¸æ „</h3>
                    <p class="text-lg text-stone-500">Wakakusa no Yado Maruei</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Wakakusa+no+Yado+Maruei" target="_blank" class="mt-4 inline-flex items-center text-blue-600 font-bold text-lg bg-white px-4 py-2 rounded-xl shadow-sm border">
                        <i class="fa-solid fa-map-location-dot mr-2"></i>å°èˆª
                    </a>
                </div>
            </div>
            
            <div class="bg-white rounded-3xl p-6 shadow-card mb-8 border border-stone-100">
                <h2 class="text-2xl font-bold text-muji-text mb-6 flex items-center border-b pb-4">
                    <i class="fa-solid fa-utensils text-green-600 mr-3"></i>é¤å»³é ç´„
                </h2>
                
                <div class="bg-green-50 rounded-2xl p-5 border border-green-100">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-lg font-bold text-stone-600">2/14 (å…­) æ™šé¤</span>
                        <span class="bg-green-200 px-3 py-1 rounded text-green-800 font-bold">18:00</span>
                    </div>
                    <h3 class="text-2xl font-bold text-muji-text mb-2">ã†ãšæ½®å±‹ é–¢å†…åº—</h3>
                    <p class="text-lg text-stone-500">é ç´„ï¼š7å¤§2å° (åŒ…å»‚)</p>
                    <div class="mt-4 p-3 bg-white rounded-xl border border-stone-200 text-lg text-stone-600 leading-relaxed">
                        **å‚™è¨»**<br>
                        é›»è©±ï¼š<span class="font-mono text-red-500"> (002æˆ–009)+81 45 664 5368</span>
                    </div>
                    <a href="https://maps.app.goo.gl/KLAqJ5vG9ZFvZRK3A" target="_blank" class="mt-4 inline-flex items-center text-blue-600 font-bold text-lg bg-white px-4 py-2 rounded-xl shadow-sm border">
                        <i class="fa-solid fa-map-location-dot mr-2"></i>å°èˆª
                    </a>
                </div>
            </div>
            <div class="bg-white rounded-3xl p-6 shadow-card mb-8 border-2 border-muji-accent">
                <h2 class="text-2xl font-bold text-muji-text mb-4 flex items-center border-b pb-4 text-muji-accent">
                    <i class="fa-solid fa-car-side mr-3"></i>ç§Ÿè»Šé ç´„å–®
                </h2>
                
                <div class="space-y-4 text-lg">
                    <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-100">
                        <div class="text-stone-500 text-base mb-1">é ç´„è™Ÿç¢¼ (äºˆç´„ç•ªå·)</div>
                        <div class="text-4xl font-black font-mono tracking-wider text-stone-800">99763076900</div>
                    </div>

                    <div class="flex flex-col gap-4">
                         <div class="flex-1 bg-stone-50 p-4 rounded-xl">
                            <div class="text-stone-500 text-base mb-1"><i class="fa-regular fa-calendar mr-1"></i>å–è»Š (å‡ºç™º)</div>
                            <div class="text-2xl font-bold text-muji-text">2/16 (ä¸€) 12:00</div>
                        </div>
                        <div class="flex-1 bg-stone-50 p-4 rounded-xl">
                            <div class="text-stone-500 text-base mb-1"><i class="fa-regular fa-calendar-check mr-1"></i>é‚„è»Š (è¿”å´)</div>
                            <div class="text-2xl font-bold text-muji-text">2/18 (ä¸‰) 14:00</div>
                        </div>
                    </div>

                    <div class="p-4">
                        <div class="font-bold mb-2"><i class="fa-solid fa-shop mr-2"></i>Toyota Rent a Car å¯Œå£«æ²³å£æ¹–åº—</div>
                        <div class="text-stone-500 ml-6">08:00-20:00</div>
                        <div class="text-stone-500 ml-6 font-mono">TEL: 0555-72-1100</div>
                        <a href="https://www.google.com/maps/search/?api=1&query=Toyota+Rent+a+Car+Fujikawaguchiko" target="_blank" class="mt-3 ml-6 inline-block text-blue-600 underline">é–‹å•Ÿåœ°åœ–</a>
                    </div>

                    <div class="border-t border-dashed border-stone-300 pt-4 mt-2">
                        <div class="flex justify-between items-end">
                            <span class="text-stone-500">ç¸½é‡‘é¡ (ç¨è¾¼)</span>
                            <span class="text-3xl font-bold text-muji-accent">Â¥68,486</span>
                        </div>
                        <div class="text-right text-stone-400 text-sm mt-1">(å«æ¶ˆè²»ç¨… Â¥6,226)</div>
                    </div>
                </div>
            </div>

        </section>

        <section id="view-others" class="view-section">
            
            <a href="https://docs.google.com/spreadsheets/d/1EnyisnKZnu_X1lp6rUfRt3McB9iAST5UOo5ybhxSTHo/edit?usp=sharing" target="_blank" class="block w-full bg-yellow-100 hover:bg-yellow-200 border-2 border-yellow-300 rounded-3xl p-6 mb-8 text-center shadow-card transition transform active:scale-95">
                <i class="fa-solid fa-cart-shopping text-4xl text-yellow-600 mb-2"></i>
                <div class="text-2xl font-bold text-yellow-800">è²·è²·æ¸…å–®</div>
                <div class="text-yellow-700 text-base">é»æ“ŠæŸ¥çœ‹ Excel è¡¨æ ¼</div>
            </a>
            
            <a href="https://www.letsgojp.com/archives/382974/" target="_blank" class="block w-full bg-pink-100 hover:bg-pink-200 border-2 border-pink-300 rounded-3xl p-6 mb-8 flex items-center shadow-card transition">
                <div class="w-14 h-14 bg-pink-200 rounded-full flex items-center justify-center mr-4 text-pink-600 text-2xl">
                    <i class="fa-solid fa-tags"></i>
                </div>
                <div>
                    <div class="text-2xl font-bold text-pink-800">æ—¥æœ¬è—¥å¦åº—Coupon</div>
                    <div class="text-pink-700 text-base">Bic Cameraã€æ¾æœ¬æ¸…ã€å¤§åœ‹è—¥å¦ã€å”å‰è¨¶å¾·ã€AEONç­‰</div>
                </div>
            </a>

            <a href="https://tenki.jp/forecast/3/17/4610/14100/10days.html" target="_blank" class="block w-full bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 rounded-3xl p-6 mb-4 flex items-center shadow-card">
                <div class="w-14 h-14 bg-blue-200 rounded-full flex items-center justify-center mr-4 text-blue-600 text-2xl">
                    <i class="fa-solid fa-cloud-sun"></i>
                </div>
                <div>
                    <div class="text-2xl font-bold text-blue-800">æ—¥æœ¬æ°£è±¡å»³</div>
                    <div class="text-blue-600 text-base">æŸ¥çœ‹æœ€æ–°å¤©æ°£é å ±</div>
                </div>
            </a>
            
            <a href="https://www.funliday.com/posts/japan-taxfree-2026/" target="_blank" class="block w-full bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 rounded-3xl p-6 mb-4 flex items-center shadow-card transition">
                <div class="w-14 h-14 bg-purple-200 rounded-full flex items-center justify-center mr-4 text-purple-600 text-2xl">
                    <i class="fa-solid fa-receipt"></i>
                </div>
                <div>
                    <div class="text-2xl font-bold text-purple-800">2026æ—¥æœ¬é€€ç¨…æ–°åˆ¶</div>
                    <div class="text-purple-700 text-base">æœ€æ–°é€€ç¨…è¦å®š</div>
                </div>
            </a>
            
            <a href="https://tokiomarinenichido.jp/zh-hant/china2/" target="_blank" class="block w-full bg-red-50 hover:bg-red-100 border-2 border-red-200 rounded-3xl p-6 mb-8 flex items-center shadow-card transition">
                <div class="w-14 h-14 bg-red-200 rounded-full flex items-center justify-center mr-4 text-red-600 text-2xl">
                    <i class="fa-solid fa-user-shield"></i>
                </div>
                <div>
                    <div class="text-2xl font-bold text-red-800">ä¿éšª:æ±äº¬æµ·ä¸Šæ—¥å‹•</div>
                    <div class="text-red-700 text-base">ä¿éšªå…¬å¸å®˜ç¶²</div>
                </div>
            </a>


            <div class="bg-white rounded-3xl p-6 shadow-card border border-stone-200">
                <h2 class="text-2xl font-bold text-muji-text mb-6 flex items-center">
                    <i class="fa-solid fa-phone-volume text-red-500 mr-3"></i>ç·Šæ€¥è¯çµ¡
                </h2>
                <div class="space-y-4 text-xl">
                    <div class="flex justify-between items-center border-b border-stone-100 pb-3">
                        <span class="text-stone-600">è­¦å¯Ÿå±€</span>
                        <span class="font-bold text-3xl font-mono text-muji-text">110</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-stone-100 pb-3">
                        <span class="text-stone-600">ç«è­¦ / æ•‘è­·è»Š</span>
                        <span class="font-bold text-3xl font-mono text-muji-text">119</span>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <span class="text-stone-600">æ—…å¤–åœ‹äººæ€¥é›£æ•‘åŠ©</span>
                    </div>
                    <div class="text-right">
                        <a href="tel:0800085095" class="inline-block bg-red-50 text-red-600 px-4 py-2 rounded-lg font-bold text-2xl font-mono">0800-085-095</a>
                    </div>
                </div>
            </div>

        </section>
        
        <section id="view-currency" class="view-section">
            <div class="bg-white rounded-3xl p-6 shadow-card mb-8 border border-stone-100">
                <h2 class="text-3xl font-bold text-muji-text mb-6 flex items-center">
                    <i class="fa-solid fa-hand-holding-dollar text-green-500 mr-3"></i>æ—¥åœ“ <i class="fa-solid fa-right-long mx-2 text-2xl text-stone-400"></i> å°å¹£ æ›ç®—
                </h2>

                <div class="mb-6">
                    <label for="exchange-rate" class="block text-lg font-bold text-stone-600 mb-2">ç•¶å‰åŒ¯ç‡ (æ—¥åœ“1å…ƒ = å°å¹£)</label>
                    <input type="number" id="exchange-rate" value="0.22" step="0.001"
                           class="w-full text-3xl font-mono p-4 border-2 border-stone-300 rounded-xl focus:border-green-500 focus:ring-1 focus:ring-green-500 transition"
                           oninput="calculateCurrency()">
                </div>

                <div class="mb-8 p-4 bg-green-50 border-2 border-green-100 rounded-2xl">
                    <label for="jpy-amount" class="block text-lg font-bold text-stone-600 mb-2">æ—¥åœ“é‡‘é¡ (JPY)</label>
                    <div class="relative">
                        <input type="number" id="jpy-amount" value="" placeholder="è«‹è¼¸å…¥æ—¥åœ“é‡‘é¡" 
                               class="w-full text-5xl font-black font-mono p-4 pr-16 border-none bg-transparent focus:outline-none text-muji-text"
                               oninput="calculateCurrency()">
                        <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-2xl text-stone-400">Â¥</span>
                    </div>
                </div>
                
                <div class="p-6 bg-muji-accent rounded-3xl text-white shadow-xl">
                    <div class="text-lg font-bold mb-2 flex items-center">
                        <i class="fa-solid fa-coins mr-2"></i> æ›ç®—å°å¹£é‡‘é¡ (TWD)
                    </div>
                    <div id="twd-result" class="text-5xl font-black font-mono tracking-wide">
                        0
                    </div>
                    <div class="text-right text-lg mt-2 font-bold">NTD</div>
                </div>
            </div>
        </section>
        
        <section id="view-prep" class="view-section">
            <div class="bg-white rounded-3xl p-6 shadow-card mb-8 border border-stone-100">
                <h2 class="text-3xl font-bold text-muji-text mb-6 flex items-center border-b pb-4">
                    <i class="fa-solid fa-list-check text-green-600 mr-3"></i>è¡Œå‰æº–å‚™æ¸…å–®
                </h2>
                
                <h3 class="text-xl font-bold text-muji-text mb-4 flex items-center mt-6">
                    <i class="fa-solid fa-plane-departure text-muji-accent mr-2"></i> äº‹å‰æº–å‚™
                </h3>
                <div class="prep-list-grid mb-8">
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å¡«å¯«Visit Japan</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">ç”³è«‹ç¶²è·¯æˆ–Esim</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å°å…”å­ä½å®¿</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">ç¢ºèªè­·ç…§æ•ˆæœŸ</span>
                    </label>
                </div>

                <h3 class="text-xl font-bold text-muji-text mb-4 flex items-center border-t border-stone-200 pt-6">
                    <i class="fa-solid fa-box-open text-green-600 mr-2"></i> æ”œå¸¶ç‰©å“
                </h3>
                <div class="prep-list-grid">
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">ç•¶åœ°è²¨å¹£</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">ä¸€äº›å°å¹£</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å€‹äººè—¥å“</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">è­·å”‡è† (å¤¾éˆè¢‹)</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">ä¹³æ¶² (å¤¾éˆè¢‹)</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å……é›»ç·š</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å€‹äººè¡£ç‰©</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">AirTag</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">è³¼ç‰©è¢‹</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">é«’è¡£è¢‹</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å£“åŠ›è¥ª</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">ç›¥æ´—ç”¨å“ (ç‰™åˆ·ã€ç‰™è†)</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">å£ç½©</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">è€³æ©Ÿ</span>
                    </label>
                    <label class="flex items-center bg-stone-50 rounded-xl hover:bg-stone-100 transition cursor-pointer">
                        <input type="checkbox" class="w-6 h-6 text-muji-accent bg-white border-stone-300 rounded focus:ring-muji-accent mr-3 flex-shrink-0">
                        <span class="font-bold text-muji-text">è€³å¡</span>
                    </label>
                </div>
            </div>
        </section>


    </main>

    <script>
        // --- DATA (UPDATED with full details, hours, and notes) ---
        const tripData = [
            {
                date: "2/12", week: "(å››)", dayTitle: "Day 1",
                weather: { icon: "fa-cloud-showers-heavy", color: "text-blue-400", status: "æ›‡æ™‚ã€…é›¨", rain: "70%", high: "11", low: "5" },
                events: [
                    { time: "13:30", title: "ğŸ›¬ æŠµé” æˆç”°æ©Ÿå ´", type: "transport", notes: "æº–å‚™å…¥å¢ƒã€é ˜å–è¡Œæ" },
                    { time: "16:00", title: "ğŸ¨ æŠµé”é£¯åº— (Westin)", type: "hotel", location: "ã‚¦ã‚§ã‚¹ãƒ†ã‚£ãƒ³ãƒ›ãƒ†ãƒ«æ¨ªæµœ", mapUrl: "https://maps.app.goo.gl/pfBbnYJjdAkG6RvF8", notes: "Check-in ä¼‘æ¯ä¸€ä¸‹" },
                    { time: "18:00", title: "ğŸ½ï¸ æ™šé¤è‡ªç†", type: "food", notes: "Merengue ã¿ãªã¨ã¿ã‚‰ã„åº—", location: "Yokohama Takashimaya / McDonald's", mapUrl: "https://maps.app.goo.gl/zFAqmknWmoteMuuY8" }
                ]
            },
// --- Day 2 ä¿®æ­£éƒ¨åˆ† ---
{
    date: "2/13", week: "(äº”)", dayTitle: "Day 2",
    weather: { icon: "fa-cloud-sun", color: "text-orange-300", status: "æ™´æ™‚ã€…æ›‡", rain: "20%", high: "13", low: "3" },
    events: [
         { 
            time: "10:00", 
            title: "ğŸ“ ç´…ç£šå€‰åº«", 
            type: "spot", 
            notes: "æ©«æ¿±èµ¤ãƒ¬ãƒ³ã‚¬å€‰åº« (11ï¼š00-20ï¼š00)\nå¾é£¯åº—åå…¬è»Šç´„25åˆ†é˜\né ä¼°æ»¯ç•™åˆ°12é»å·¦å³", 
            location: "Yokohama Red Brick Warehouse / Cupnoodles Museum",
            mapUrl: "https://maps.app.goo.gl/2Q4DViqAJRksLvjR7",
            extraLinks: [
                { title: "Strawberry Festival2026", url: "https://www.yokohama-akarenga.jp/strawberryfes/", hours: "10:00~18:00", fee: "500å††" }
            ]
        },
        { 
            time: "12:30", 
            title: "ğŸ›ï¸ æ¨ªæµœå¸‚é–‹æ¸¯è¨˜å¿µæœƒé¤¨", 
            type: "spot", 
            location: "Yokohama Archives of History", 
            hours: "09:30-17:00", 
            mapUrl: "https://maps.app.goo.gl/GYgTX9yU72vA3N6c6", 
            notes: "åŒ…å«ï¼šæ©«æ¿±å¸‚é–‹æ¸¯è¨˜å¿µæœƒé¤¨ï¼ˆã‚¸ãƒ£ãƒƒã‚¯ã®å¡”ï¼‰" 
        }, // é€™è£¡åŸæœ¬å¤šäº†ä¸€å€‹æ‹¬è™Ÿï¼Œå·²ä¿®æ­£
        { 
            time: "14:00", 
            title: "ğŸ½ï¸ åˆé¤æ™‚é–“", 
            type: "food", 
            notes: "é¤å»³å»ºè­°ï¼šã‚·ãƒ³ã‚·ãƒ¤ (17:00-23:00) æˆ– La Figlia Del Presidente (11:30-15:00)\næ³¨æ„ç‡Ÿæ¥­æ™‚é–“", 
            mapUrl: "https://maps.app.goo.gl/VpfzxBNpbKpy9EDN9" 
        },
        { 
            time: "15:00", 
            title: "ğŸ›ï¸ åœ–å¦å¡é–€åšç‰©é¤¨", 
            type: "spot", 
            location: "The Westin Yokohama (nearby)", 
            hours: "11:00-18:00", 
            mapUrl: "https://maps.app.goo.gl/tNCATHA8hccCCk1K8",
            notes: "é£¯åº—éš”å£" 
        },
        { 
            time: "16:00", 
            title: "ğŸª æ˜Ÿç©ºæŠ•å½±", 
            type: "spot", 
            location: "ã‚³ãƒ‹ã‚«ãƒŸãƒãƒ«ã‚¿ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¢YOKOHAMA", 
            hours: "10:00-21:00", 
            mapUrl: "https://maps.app.goo.gl/2LyDhMKE9fm6fXmaA", 
            notes: "éœ€ç¢ºèªä¸Šæ˜ æ™‚é–“" 
        }
    ]
},            {
                date: "2/14", week: "(å…­)", dayTitle: "Day 3",
                weather: { icon: "fa-cloud-sun", color: "text-orange-300", status: "æ™´æ™‚ã€…æ›‡", rain: "20%", high: "15", low: "5" },
                events: [
                    { 
                        time: "10:30", 
                        title: "ğŸ›ï¸ ä¸¸äº•ã‚·ãƒ†ã‚£ / è³¼ç‰©æ™‚é–“", 
                        type: "shopping", 
                        notes: "å¯¶å¯å¤¢ä¸­å¿ƒ 8F (10:30-20:30)\nå…‰ä¹‹ç¾å°‘å¥³ 8F (10:30-20:30)\né§¿æ²³å±‹ 7F (10:30-20:30)\nGood Smile B2 (10:30-20:30)",
                        location: "Marui City Yokohama",
                        mapUrl: "https://maps.app.goo.gl/DqvpBBwN3bin9nd29"
                    },
                    { 
                        time: "12:00", 
                        title: "ğŸ›ï¸ SOGOè³¼ç‰©", 
                        type: "shopping", 
                        notes: "æ©«æ¿±LOFT  7F (10:00-20:00)\nã‚·ãƒ¥ã‚¬ãƒ¼ãƒã‚¿ãƒ¼ã®æœ¨ B2 (10:00-20:00)\nãƒãƒ¼ãƒ­ã‚¦ B2 (10:00-20:00)", 
                        location: "SOGO Yokohama",
                        mapUrl: "https://maps.app.goo.gl/KxcSEdZkPHLVYzTs7"
                    },
                    { 
                        time: "14:00", 
                        title: "ğŸ›ï¸ Bic Camera / ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ†", 
                        type: "shopping", 
                        notes: "Bic Camera (10:00-21:00)\nãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ† æ¨ªæµœè¥¿å£åº— (24å°æ™‚ç‡Ÿæ¥­)", 
                        location: "Bic Camera / Don Quijote Yokohama Nishiguchi Store",
                        mapUrl: "https://maps.app.goo.gl/S5fBnVPq3RDvKXw4A"
                    },
                    { 
                        time: "18:00", 
                        title: "ğŸ½ï¸ æ™šé¤ï¼šã†ãšæ½®å±‹ é–¢å†…åº—", 
                        type: "food", 
                        notes: "é ç´„7å¤§2å° (åŒ…å»‚)", 
                        location: "ã†ãšæ½®å±‹ é–¢å†…åº—", 
                        mapUrl: "https://maps.app.goo.gl/KLAqJ5vG9ZFvZRK3A" 
                    }
                ]
            },
            {
                date: "2/15", week: "(æ—¥)", dayTitle: "Day 4",
                weather: { icon: "fa-cloud-sun", color: "text-orange-400", status: "æ›‡æ™‚ã€…æ™´", rain: "40%", high: "16", low: "6" },
                events: [
                    { 
                        time: "09:00", 
                        title: "ğŸ§º æ•´ç†å¾…æ´—è¡£ç‰©æ‹¿åˆ°æ©«æ¿±è»Šç«™ç½®ç‰©æ«ƒ", 
                        type: "transport", 
                        notes: "å…ˆå°‡è¦æ´—çš„è¡£æœ3å¥—æ•´ç†å¥½ï¼Œå¸¶å»æ©«æ¿±è»Šç«™é–æŠ•å¹£å¼ç½®ç‰©æ«ƒï¼Œå¾æ©«é ˆè³€å›ä¾†å¾Œå»é ˜è¡£æœå¸¶å»æˆ¶éƒ¨æ´—ï¼Œåœ¨æˆ¶éƒ¨åƒé£¯ é ˜è¡£æœ å›é£¯åº—", 
                        mapUrl: "https://maps.app.goo.gl/PEmm7TZ4ey4h2A4d9",
                        extraLinks: [
                            { title: "ç½®ç‰©æ«ƒä½ç½®å½±ç‰‡ (JRæ©«æ¿±ç«™)", url: "https://www.youtube.com/watch?v=ZIITcjh49Xk" }
                        ]
                    },
                    { time: "09:20", title: "ğŸ›³ï¸ å‡ºç™¼å‰å¾€æ©«é ˆè³€", type: "transport", notes: "å‚™è¨»ï¼šæ©«æ¿± â†’ æ©«é ˆè³€ è»Šç¨‹ç´„ 1 å°æ™‚ 10 åˆ†é˜" },
                    { 
                        time: "11:00", 
                        title: "âš“ è»æ¸¯å·¡ã‚Š", 
                        type: "spot", 
                        location: "Yokosuka Naval Port", 
                        mapUrl: "https://maps.app.goo.gl/S9BMVtw7gDufcGMh9", 
                        notes: "â– äºˆç´„ç•ªå·ï¼š487732\nâ– ä¹—èˆ¹æ—¥ï¼š2026å¹´2æœˆ15æ—¥ 11:00\nè¡Œç¨‹ç´„ 45 åˆ†é˜",
                        extraLinks: [
                            { title: "è»æ¸¯å·¡ã‚Š å®˜ç¶²", url: "https://yokosuka-gunko.jp/" }
                        ]
                    },
                    { time: "12:30", title: "ğŸ› åˆé¤: æµ·è»å’–å“©", type: "food", notes: "å¾è»æ¸¯èµ°ç´„ 15 åˆ†é˜", mapUrl: "https://maps.app.goo.gl/v6kx9q45aWDS6b4P7" },
                    { time: "14:00", title: "ğŸš¢ ä¸‰ç¬ æˆ°è‰¦", type: "spot", location: "Mikasa Park", hours: "09:00-16:30", mapUrl: "https://maps.app.goo.gl/4C2H3r3szSRerJbW7", notes: "13:00-13:45 (é è¨ˆåœç•™æ™‚é–“)\nå¾æ©«é ˆè³€ä¸­å¤®æ­å…¬è»Šç´„ 10 åˆ†é˜" },
                    { time: "16:00", title: "ğŸ›ï¸ æ©«æ¿±é«˜å³¶å±‹è³¼ç‰©", type: "shopping", location: "Yokohama Takashimaya", mapUrl: "https://maps.app.goo.gl/9LX2rKjCQ3KYfGqy8", notes: "B1 ä¼´æ‰‹ç¦®ï¼š\n1. æ©«æ¿±ã‹ã‚’ã‚Š\n2. éŒå€‰ç´…è°·\n3. è±Šå³¶å±‹\n4. ã‚¨ã‚·ãƒ¬ ãƒ‘ãƒ†ã‚£ã‚¹ãƒªãƒ¼ã‚ªãƒ–ãƒ¼ãƒ«\n\né¤å»³ (å¯é¸)ï¼šAFURIï¼ˆæ¨ªæµœã‚¸ãƒ§ã‚¤ãƒŠã‚¹B1ï¼‰ã€ãƒŠãƒ—ãƒ¬ï¼ˆé«˜å³¶å±‹8Fï¼‰" },
                    { 
                        time: "17:00", 
                        title: "ğŸ§º é ˜è¡£æœï¼Œå‰å¾€è‡ªåŠ©å¼æ´—è¡£åº—", 
                        type: "spot", 
                        notes: "é ˜è¡£æœï¼Œåäº¬æ€¥é›»è»Šå¸¶å»æˆ¶éƒ¨æ´—ï¼Œåœ¨æˆ¶éƒ¨åƒé£¯ é ˜è¡£æœ èµ°å›é£¯åº—", 
                        mapUrl: "https://maps.app.goo.gl/xUyCALEAG72Q4TPh6" 
                    }
                ]
            },
            {
                date: "2/16", week: "(ä¸€)", dayTitle: "Day 5",
                extra: "é™¤å¤•",
                weatherSplit: {
                    left: { title: "æ©«æ¿±", icon: "fa-cloud-sun-rain", color: "text-blue-400", status: "æ™´æ™‚ã€…é›¨", rain: "30%", high: "16", low: "9" },
                    right: { title: "æ²³å£æ¹–", icon: "fa-cloud-sun", color: "text-orange-400", status: "æ›‡æ™‚ã€…æ™´", rain: "40%", high: "10", low: "0" }
                },
                events: [
                    { time: "", title: "ğŸš— å‰å¾€æ²³å£æ¹–", type: "transport", notes: "åŒ…è»Šå‰å¾€ï¼Œæ™‚é–“å½ˆæ€§ï¼Œæº–å‚™è¾¦ç†é€€æˆ¿" },
                    { time: "12:00", title: "ğŸš™ ç§Ÿè»Šå–è»Š ãƒˆãƒ¨ã‚¿ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼å¯Œå£«æ²³å£æ¹–", type: "transport", location: "Toyota Rent a Car å¯Œå£«æ²³å£æ¹–åº—", mapUrl: "https://maps.app.goo.gl/edaZMi9JmtxxyNdC7", notes: "é ç´„ç•ªå·: 99763076900" }, 
                    { time: "15:00", title: "ğŸ¨ é£¯åº— Check In è‹¥è‰ã®å®¿ ä¸¸æ „", type: "hotel", location: "è‹¥è‰ã®å®¿ ä¸¸æ „", mapUrl: "https://maps.app.goo.gl/RSdqcU69z3aMMDxa7", notes: "å…¥ä½æº«æ³‰é£¯åº—" } 
                ]
            },
            {
                date: "2/17", week: "(äºŒ)", dayTitle: "Day 6",
                extra: "åˆä¸€",
                weather: { icon: "fa-cloud-sun", color: "text-orange-400", status: "æ›‡æ™‚ã€…æ™´", rain: "40%", high: "11", low: "-3" },
                events: [
                    { time: "09:00", title: "â›©ï¸ å¯Œå£«å¾¡å®¤æµ…é–“ç¥ç¤¾", type: "spot", location: "Fujiomurosengen Shrine", hours: "09:00-16:00", mapUrl: "https://maps.app.goo.gl/wQEHmxRdc6X242a48", notes: "æ–°å¹´åƒæ‹œã€‚åƒæ‹œå¾Œæ­å…¬è»Šåˆ°æ²³å£æ¹–ç«™ç´„ 30 åˆ†é˜" },
                    { time: "13:00", title: "ğŸ›ï¸ æ²³å£æ¹–è»Šç«™é€±é‚Šè³¼ç‰©", type: "shopping", notes: "åŒ…å«ï¼šé£Ÿãƒ‘ãƒ³å°‚é–€åº—FUJISAN SHOKUPAN (11:00-18:00)ï¼›å¯Œå£«å±±ã·ã‚Šã‚“ (11:00-18:00)", location: "Kawaguchiko Station area", mapUrl: "https://maps.app.goo.gl/TZMj7FK4eUaVkibf9" }
                ]
            },
            {
                date: "2/18", week: "(ä¸‰)", dayTitle: "Day 7",
                weather: { icon: "fa-sun", color: "text-orange-500", status: "æ™´ã‚Œ", rain: "0%", high: "11", low: "2" },
                events: [
                    { time: "14:00", title: "ğŸš— æ­¸é‚„ç§Ÿè»Š", type: "transport", location: "Toyota Rent a Car å¯Œå£«æ²³å£æ¹–åº—", mapUrl: "https://maps.app.goo.gl/edaZMi9JmtxxyNdC7", notes: "è«‹é ç•™è¶³å¤ æ™‚é–“é‚„è»Š" },
                    { time: "17:45", title: "ğŸ›« é£›æ©Ÿèµ·é£› å›å°ç£", type: "transport", notes: "è«‹æå‰æŠµé” NRT æˆç”°æ©Ÿå ´" }
                ]
            }
        ];

        let currentDayIndex = 0;

        // --- FUNCTIONS ---

        // 1. Switch Main Tabs (Top Nav)
        function switchMainTab(targetId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById(`view-${targetId}`).classList.add('active');
            
            document.querySelectorAll('.nav-main-btn').forEach(btn => {
                if(btn.dataset.target === targetId) {
                    btn.classList.remove('text-stone-400', 'border-transparent');
                    btn.classList.add('text-muji-accent', 'border-muji-accent', 'bg-stone-50');
                } else {
                    btn.classList.add('text-stone-400', 'border-transparent');
                    btn.classList.remove('text-muji-accent', 'border-muji-accent', 'bg-stone-50');
                }
            });
            window.scrollTo(0, 0);

            // Special: If switching to currency tab, run calculation
            if (targetId === 'currency') {
                calculateCurrency();
            }
            
            // Adjust scroll position for top nav with two rows
            if (targetId === 'plan') {
                document.querySelector('main').style.paddingTop = '8rem'; // Ensure enough space for two-row nav
            } else {
                document.querySelector('main').style.paddingTop = '8rem';
            }
        }

        // 2. Render Day Buttons
        function renderDayButtons() {
            const container = document.getElementById('day-buttons-container');
            container.innerHTML = tripData.map((day, index) => `
                <button onclick="selectDay(${index})" 
                    class="day-btn flex-shrink-0 w-20 h-20 rounded-2xl flex flex-col items-center justify-center border-2 transition-all duration-200 ${index === currentDayIndex ? 'bg-muji-text text-white border-muji-text shadow-lg transform scale-105' : 'bg-white text-stone-400 border-stone-200'}"
                    id="day-btn-${index}">
                    <span class="text-xs font-bold mb-1">${day.dayTitle}</span>
                    <span class="text-xl font-bold font-sans">${day.date}</span>
                </button>
            `).join('');
        }

        // 3. Helper to generate weather HTML block
        function getWeatherHTML(w) {
            return `
                <div class="weather-box flex flex-col items-center justify-center h-full">
                    <div class="text-5xl mb-2 ${w.color}"><i class="fa-solid ${w.icon}"></i></div>
                    
                    <div class="text-lg font-bold text-stone-600 mb-1 flex items-center gap-2">
                        ${w.status}
                        <span class="text-blue-400 text-sm font-normal flex items-center">
                            <i class="fa-solid fa-cloud-showers-heavy mr-1 text-xs"></i>${w.rain}
                        </span>
                    </div>

                    <div class="text-2xl font-bold font-mono">
                        <span class="text-red-500">${w.high}Â°</span> <span class="text-stone-300 mx-1">/</span> <span class="text-blue-500">${w.low}Â°</span>
                    </div>
                </div>
            `;
        }

        // 4. Select Day & Render Content
        function selectDay(index) {
            currentDayIndex = index;
            
            // Update Buttons Visual
            document.querySelectorAll('.day-btn').forEach((btn, idx) => {
                if(idx === index) {
                    btn.className = "day-btn flex-shrink-0 w-20 h-20 rounded-2xl flex flex-col items-center justify-center border-2 transition-all duration-200 bg-muji-text text-white border-muji-text shadow-lg transform scale-105";
                    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                } else {
                    btn.className = "day-btn flex-shrink-0 w-20 h-20 rounded-2xl flex flex-col items-center justify-center border-2 transition-all duration-200 bg-white text-stone-400 border-stone-200";
                }
            });

            // Render Itinerary Content
            const day = tripData[index];
            const content = document.getElementById('daily-content');
            
            // --- Weather Area HTML ---
            let weatherAreaHtml = '';
            
            if (day.weatherSplit) {
                // Day 5 special layout (2-column for split weather)
                weatherAreaHtml = `
                    <div class="grid grid-cols-2 gap-3 mt-4">
                        <div>
                            <div class="text-base text-muji-text mb-1 font-bold">${day.weatherSplit.left.title}</div>
                            ${getWeatherHTML(day.weatherSplit.left)}
                        </div>
                        <div>
                            <div class="text-base text-muji-text mb-1 font-bold">${day.weatherSplit.right.title}</div>
                            ${getWeatherHTML(day.weatherSplit.right)}
                        </div>
                    </div>
                `;
            } else {
                // Default layout (single weather box)
                weatherAreaHtml = `
                    <div class="mt-4 max-w-xs mx-auto">
                        ${getWeatherHTML(day.weather)}
                    </div>
                `;
            }

            // Date Header (Centered layout)
            let html = `
                <div class="text-center pt-2 pb-4 animate-fadeIn">
                    <h2 class="text-3xl font-bold text-muji-text mb-1">
                        ${day.date} <span class="text-xl text-stone-500">${day.week}</span>
                    </h2>
                    ${day.extra ? `<span class="inline-block bg-red-100 text-red-600 px-3 py-1 rounded-full text-base font-bold mb-2">${day.extra}</span>` : ''}
                    
                    ${weatherAreaHtml}
                </div>
                
                <div class="text-center pt-4 pb-4 border-b-2 border-muji-text border-opacity-10 mb-4">
                    <img src="334537dd.png" alt="åˆ†éš”ç·šåœ–æ¡ˆ" class="inline-block" style="width: initial; height: initial;">
                </div>
                <div class="space-y-6 pb-20 animate-fadeIn">
            `;

            // Events
            html += day.events.map(event => {
                // æ‰€æœ‰è¡Œç¨‹éƒ½ä½¿ç”¨é è¨­çš„æ·¡ç°è‰²é‚Šæ¡†/èƒŒæ™¯
                let colorClass = "bg-stone-50 border-stone-200";
                
                // Map Button - Full width
                // Uses the provided mapUrl first, then falls back to location search
                const mapLink = event.mapUrl ? event.mapUrl : (event.location ? `https://maps.app.goo.gl/DqvpBBwN3bin9nd29${encodeURIComponent(event.location)}` : null);

                const mapBtn = mapLink
                    ? `<a href="${mapLink}" target="_blank" 
                        class="mt-4 flex items-center justify-center w-full py-3 rounded-xl bg-white border border-stone-300 text-blue-600 font-bold text-lg active:bg-blue-50 transition">
                        <i class="fa-solid fa-map-location-dot mr-2 text-xl"></i> é–‹å•Ÿåœ°åœ–
                       </a>` 
                    : '';
                    
                // Extra Links (for Red Brick Warehouse & Naval Port)
                let extraLinksHtml = '';
                if (event.extraLinks && event.extraLinks.length > 0) {
                    extraLinksHtml = event.extraLinks.map(link => {
                        const info = link.hours ? `<span class="text-stone-500 text-sm ml-2">(${link.hours}${link.fee ? `, ${link.fee}` : ''})</span>` : '';
                        return `
                            <a href="${link.url}" target="_blank" 
                               class="mt-3 flex items-center justify-center w-full py-3 rounded-xl bg-white border border-stone-300 text-green-600 font-bold text-lg active:bg-green-50 transition">
                                <i class="fa-solid fa-link mr-2 text-xl"></i> ${link.title} ${info}
                            </a>`;
                    }).join('');
                }


                // Hours Display
                const hoursHtml = event.hours ?
                    `<div class="mt-2 text-sm font-bold text-muji-accent flex items-center bg-stone-100 px-3 py-1 rounded-full w-fit">
                        <i class="fa-regular fa-clock mr-1"></i> ç‡Ÿæ¥­æ™‚é–“ï¼š${event.hours}
                    </div>` : '';

                // Notes/Remarks Display 
                const notesHtml = event.notes ? 
                    `<div class="mt-2 p-3 bg-white rounded-xl border border-stone-200 text-lg text-stone-600 leading-relaxed whitespace-pre-line">
                        ${event.notes.replace(/\n/g, '<br>')}
                    </div>` : '';

                // Time Display
                const timeDisplay = event.time 
                    ? `<div class="text-lg font-bold font-mono text-muji-accent mb-1">${event.time}</div>`
                    : '';

                return `
                    <div class="rounded-3xl p-6 border-2 ${colorClass} shadow-sm relative">
                        ${timeDisplay}
                        <h3 class="text-2xl font-bold text-muji-text leading-tight mb-2">${event.title}</h3>
                        ${hoursHtml}
                        ${notesHtml} 
                        ${mapBtn}
                        ${extraLinksHtml} 
                    </div>
                `;
            }).join('');
            
            html += `</div>`; // Close the events container
            content.innerHTML = html;
        }

        // 5. Currency Calculation Function
        function calculateCurrency() {
            const jpyInput = document.getElementById('jpy-amount');
            const rateInput = document.getElementById('exchange-rate');
            const resultDiv = document.getElementById('twd-result');
            
            const jpy = parseFloat(jpyInput.value) || 0;
            const rate = parseFloat(rateInput.value) || 0.22; // Fallback to 0.22 if input is invalid/empty

            const twd = jpy * rate;
            
            // Display result formatted as a whole number (for a cleaner look)
            resultDiv.textContent = twd.toLocaleString('en-US', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            });
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            renderDayButtons();
            selectDay(0);
            
            // Ensure first tab is active and padding is correct
            switchMainTab('plan'); 
        });

    </script>
</body>

</html>







